# MySQLå­¦ä¹ ç¬”è®°

## å‡†å¤‡å·¥ä½œ

1. ç¯å¢ƒå˜é‡é…ç½®(ä¸ºpathè·¯å¾„é™„åŠ mysqlçš„binç›®å½•)

- ä¸€æ¬¡æ€§æ–¹æ¡ˆï¼š`PATH="$PATH":/usr/local/mysql/bin`
- [æ°¸ä¹…æ€§æ–¹æ¡ˆ](https://www.cnblogs.com/wangrui-techbolg/archive/2012/12/22/2829614.html)

2. ä¿®æ”¹**å¯†ç **ï¼š`ALTER USER 'root'@'localhost' IDENTIFIED BY â€˜å¯†ç â€™;`

3. æ•°æ®åº“çš„å¯åŠ¨ï¼š`net start mysql`ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ç³»ç»Ÿåå¥½è®¾ç½®-mysqlè¿›è¡Œå¯åŠ¨ï¼‰

4. æ•°æ®åº“çš„è¿æ¥ï¼š`mysql -h localhost -u root -p`
5. æ¸…å±ï¼šcontrol + L
6. å–æ¶ˆæ‰§è¡Œå½“å‰è¯­å¥ï¼š\c



## åº“çº§æ“ä½œ

- **æ˜¾ç¤º**æ•°æ®åº“ï¼š`show databases;`
- **é€‰æ‹©**æ•°æ®åº“ï¼š`use dbName;`
- **åˆ›å»º**æ•°æ®åº“ï¼š`create database dbName charset utf8;`
- **åˆ é™¤**æ•°æ®åº“ï¼š`drop database dbname;`



## è¡¨çº§æ“ä½œ

- **æ˜¾ç¤º**è¡¨ï¼š`show tables;`

- **åˆ›å»º**è¡¨ï¼š

  ```
  create table è¡¨å (
  åˆ—åç§°1ã€€åˆ—ç±»å‹ã€€[åˆ—å‚æ•°]ã€€[not null default ],
  ....åˆ—2...
  ....
  åˆ—åç§°Nã€€åˆ—ç±»å‹ã€€[åˆ—å‚æ•°]ã€€[not null default ]
  )engine myisam/innodb charset utf8/gbk
  ```

  ä¾‹ï¼šç­çº§æˆå‘˜ä¿¡æ¯

  ```
  create table class(
  Id int primary key auto_increment,
  Sname varchar(10) not null default '',
  Gender char(1) not null default '',
  Company varchar(20) not null default '',
  Salary decimal(6,2) not null default 0.00,
  Fanbu smallint not null default 0
  )engine myisam charset utf8;
  ```

- **åˆ é™¤**è¡¨ï¼š`drop table è¡¨å;`

- **æŸ¥çœ‹**å»ºè¡¨è¿‡ç¨‹ï¼š`show create table è¡¨å;`

- **æ”¹è¡¨å**ï¼š`rename è¡¨å;`



## åˆ—æ“ä½œ

- **å¢åŠ **åˆ—ï¼š

  1. é»˜è®¤åŠ åœ¨æœ€åä¸€åˆ—ï¼š`alter table tableName add åˆ—åç§° åˆ—ç±»å‹ åˆ—å‚æ•°;`

  2. åŠ åœ¨æŸåˆ—åï¼š`alter table è¡¨å add åˆ—åç§° åˆ—ç±»å‹ åˆ—å‚æ•° after æŸåˆ—åç§°;`

  3. åŠ åœ¨ç¬¬ä¸€åˆ—ï¼š`alter table è¡¨å add åˆ—åç§° åˆ—ç±»å‹ åˆ—å‚æ•° first;`

- **åˆ é™¤**åˆ—ï¼š`alter table è¡¨å  drop åˆ—å;`

- **ä¿®æ”¹**åˆ—ç±»å‹ï¼š`alter table è¡¨å modify åˆ—å æ–°ç±»å‹ æ–°å‚æ•°;`

- **ä¿®æ”¹**åˆ—åï¼š`alter table è¡¨å change æ—§åˆ—å æ–°åˆ—å æ–°ç±»å‹ æ–°å‚æ•°;`

- **æ¸…ç©º**è¡¨æ•°æ®ï¼š`truncate è¡¨å;`

- **æŸ¥çœ‹**åˆ—ï¼š`desc è¡¨å;`



## ä¸‰å¤§åˆ—ç±»å‹

### æ•°å€¼å‹

Noteï¼šé™¤äº†æ•´æ•°å‹ï¼Œå…¶ä»–éƒ½è¦åŠ å¼•å·

- **æ•´å‹ï¼šTinyint/ smallint/ mediumint/int/ bigint**

  ã€æ•´å‹æ‰€å å­—èŠ‚ä¸å­˜å‚¨èŒƒå›´ã€‘å å­—èŠ‚è¶Šå¤š,å­˜å‚¨èŒƒå›´è¶Šå¤§ã€‚

  |   ç±»å‹    | å­—èŠ‚ | ä½æ•° | å­˜å‚¨èŒƒå›´(æ— ç¬¦å·) |  å­˜å‚¨èŒƒå›´ï¼ˆå¸¦ç¬¦å·ï¼‰  |
  | :-------: | :--: | :--: | :--------------: | :------------------: |
  |  tinyint  |  1   |  8   |      0â€”255       |       -128â€”127       |
  | smallint  |  2   |  16  |     0â€”65535      |     -32768â€”32767     |
  | mediumint |  3   |  24  |       ...        |         ...          |
  |    Int    |  4   |  32  |       ...        |         ...          |
  |  bigint   |  8   |  64  |                  |                      |
  |  ä¸€èˆ¬åœ°   |  n   |  8n  |     0â€”2^8n-1     | -2^(8n-1)â€”2^(8n-1)-1 |

  æ¶‰åŠ**äºŒè¿›åˆ¶è¡¥ç **é—®é¢˜ï¼šæœ€é«˜ä½çš„0/1è¡¨ç¤ºç¬¦å·ï¼Œ0è¡¨ç¤ºæ­£ï¼Œ1è¡¨ç¤ºè´Ÿã€‚ä»¥tinyintä¸ºä¾‹ï¼Œæ­£æ•° = ç»å¯¹å€¼ä½ï¼Œè´Ÿæ•°= ç»å¯¹å€¼ä½ - 128ï¼Œå¦‚æ­£æ•°ï¼š0000 0000 ---> 0ï¼Œ0111 1111 --->127ï¼Œè´Ÿæ•°ï¼š1000 0000 ---> -128ï¼Œ1111 1111 --->-1

  **ã€æ•´å‹ç³»ç»Ÿçš„å¯é€‰å‚æ•°ã€‘XXint(M) unsigned zerofill**

  ä¾‹ï¼š`age tinyint(4) unsigned`ã€`stunum smallint(6) zerofill`

  `Unsigned`ï¼šä»£è¡¨æ­¤åˆ—ä¸ºæ— ç¬¦å·ç±»å‹ï¼Œ èŒƒå›´ä»0å¼€å§‹ï¼›ä¸åŠ unsingedï¼Œ åˆ™è¯¥åˆ—é»˜è®¤æ˜¯æœ‰ç¬¦å·ç±»å‹,èŒƒå›´ä»è´Ÿæ•°å¼€å§‹ã€‚

  `Zerofill`ï¼šä»£è¡¨0å¡«å……ï¼Œå³ï¼šå¦‚æœè¯¥æ•°å­—ä¸è¶³å‚æ•°Mä½ï¼Œåˆ™è‡ªåŠ¨è¡¥0ï¼Œè¡¥å¤ŸMä½ã€‚å¦‚æœæ²¡æœ‰zerofillå±æ€§ï¼Œå•ç‹¬çš„å‚æ•°Mï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚å¦‚æœè®¾ç½®æŸåˆ—ä¸ºzerofillï¼Œåˆ™è¯¥åˆ—å·²ç»é»˜è®¤ä¸º unsignedï¼Œæ— ç¬¦å·ç±»å‹ã€‚

- **å°æ•°å‹ï¼šæµ®ç‚¹å‹ï¼šfloat(M,D)ã€å®šç‚¹å‹ï¼šdecimal(M,D)**

  Mæ˜¯"ç²¾åº¦"ï¼Œä»£è¡¨æ€»ä½æ•°ï¼›Dæ˜¯"æ ‡åº¦"ï¼Œä»£è¡¨å°æ•°ä½ã€‚å¦‚float(6,2)è¡¨ç¤º-9999.99â€”9999.99ï¼Œå¦‚æœåŠ äº†unsignedï¼Œåˆ™æ˜¯0â€”9999.99ã€‚

  ã€floatå’Œdecimalç©ºé—´ä¸Šçš„åŒºåˆ«ã€‘floatèƒ½å­˜10^38ï¼Œ10^-38ã€‚å¦‚æœ M<=24ï¼Œå 4ä¸ªå­—èŠ‚ï¼Œ24 <M <=53ï¼Œ8ä¸ªå­—èŠ‚ï¼›decimal () ï¼Œå˜é•¿å­—èŠ‚ã€‚decimalæ¯”floatç²¾åº¦æ›´é«˜ï¼Œé€‚åˆå­˜å‚¨è´§å¸ç­‰è¦æ±‚ç²¾ç¡®çš„æ•°å­—ã€‚

### å­—ç¬¦ä¸²å‹

- **å®šé•¿å­—ç¬¦ä¸²ï¼šChar(M)**

  M ä»£è¡¨å®½åº¦ï¼Œ 0<=M<=255ä¹‹é—´ã€‚å¦‚æœå®é™…å­˜å‚¨å†…å®¹ä¸è¶³Mä¸ªï¼Œåˆ™åé¢åŠ ç©ºæ ¼è¡¥é½ã€‚å–å‡ºæ¥çš„æ—¶å€™ï¼Œå†æŠŠåé¢çš„ç©ºæ ¼å»æ‰ã€‚

  ä¾‹ï¼šchar(5)ï¼Œè¾“å…¥ 'aa ' ---> å­˜å‚¨ 'aa   ' ---> å–å‡º 'aa'ã€‚

- **å˜é•¿å­—ç¬¦ä¸²ï¼šVarchar(M)**

  Mä»£è¡¨å®½åº¦ï¼Œ0<=M<=65535ï¼ˆä»¥asciiå­—ç¬¦ä¸ºä¾‹ï¼Œutf822000å·¦å³ï¼‰ã€‚ä¸ç”¨ç©ºæ ¼è¡¥é½ï¼Œä½†åˆ—å†…å®¹å‰æœ‰1ï½2ä¸ªå­—èŠ‚æ¥æ ‡å¿—è¯¥åˆ—çš„å†…å®¹é•¿åº¦ã€‚

  ã€charå’Œvarcharæ¯”è¾ƒã€‘å¥½æ¯”äºåè½¦ï¼Œä¸€ç§æ˜¯ç»Ÿä¸€ç¥¨ä»·ï¼Œæé«˜äº†æ•ˆç‡ï¼Œçœäº†å”®ç¥¨å‘˜ï¼›å¦ä¸€ç§æ˜¯æ ¹æ®ç«™æ•°åŒºåˆ†ç¥¨ä»·ï¼Œéœ€è¦ä¸€ä¸ªå”®ç¥¨å‘˜ï¼Œä¸“é—¨è®°å½•å®¢æˆ·çš„ç«™æ•°ã€‚

  |  ç±»å‹   | å®½åº¦ | å¯å­˜ | å®å­˜ |     å®å ç©ºé—´     |     åˆ©ç”¨ç‡     |
  | :-----: | :--: | :--: | :--: | :--------------: | :------------: |
  |  char   |  M   |  M   |  i   |        M         |   i/M<=100%    |
  | varchar |  M   |  M   |  i   | i å­—ç¬¦+(1~2)å­—èŠ‚ | i/(i+1~2)<100% |

  æ³¨æ„: char(M)ï¼Œvarchar(M)é™åˆ¶çš„æ˜¯å­—ç¬¦ï¼Œä¸æ˜¯å­—èŠ‚ã€‚å³ char(2) charset utf8ï¼Œèƒ½å­˜2ä¸ªutf8å­—ç¬¦ï¼Œæ¯”å¦‚'ä¸­å›½'ã€‚

  ã€charä¸varcharå‹çš„é€‰æ‹©åŸåˆ™ã€‘

  1ã€è€ƒè™‘ç©ºé—´åˆ©ç”¨æ•ˆç‡

  å››å­—æˆè¯­è¡¨ï¼Œchar(4), 

  ä¸ªäººç®€ä»‹ï¼Œå¾®åš140å­—ï¼Œvarchar(140)

  2ã€è€ƒè™‘é€Ÿåº¦

  ç”¨æˆ·å: char 

- **Text æ–‡æœ¬ç±»å‹ï¼š** å¯ä»¥å­˜æ¯”è¾ƒå¤§çš„æ–‡æœ¬æ®µï¼Œæœç´¢é€Ÿåº¦ç¨æ…¢ã€‚

  ä¸ç”¨åŠ é»˜è®¤å€¼(åŠ äº†ä¹Ÿæ²¡ç”¨)

- **BlobäºŒè¿›åˆ¶ç±»å‹ï¼š** ç”¨æ¥å­˜å‚¨å›¾åƒï¼ŒéŸ³é¢‘ç­‰äºŒè¿›åˆ¶ä¿¡æ¯ã€‚

  æ³¨æ„ï¼šå½“è¾“å…¥æ–‡æœ¬ç±»å‹æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œæ„ä¹‰åœ¨äºé˜²æ­¢å› ä¸ºå­—ç¬¦é›†çš„é—®é¢˜ï¼Œå¯¼è‡´ä¿¡æ¯ä¸¢å¤±ã€‚æ¯”å¦‚:ä¸€å¼ å›¾ç‰‡ä¸­æœ‰0xFFå­—èŠ‚ï¼Œè¿™ä¸ªåœ¨asciiå­—ç¬¦é›†è®¤ä¸ºéæ³•ï¼Œåœ¨å…¥åº“çš„æ—¶å€™ï¼Œè¢«è¿‡æ»¤äº†ã€‚

### æ—¥æœŸæ—¶é—´ç±»å‹

|       ç±»å‹        |               æ ‡å‡†               |                    èŒƒå›´                    | å­˜å‚¨éœ€æ±‚ |
| :---------------: | :------------------------------: | :----------------------------------------: | :------: |
|     æ—¥æœŸ date     |            YYYY-MM-DD            |           1000-01-01ï½9999-12-31           |  3å­—èŠ‚   |
|     æ—¶é—´ time     |             HH:MM:SS             |           -838:59:59 ~ 838:59:59           |  3å­—èŠ‚   |
| æ—¥æœŸæ—¶é—´ datetime |       YYYY-MM-DD HH:MM:SS        | 1000/01//01 00:00:00 ~ 9999:12:31 23:59:59 |  8å­—èŠ‚   |
| æ—¶é—´æˆ³ timestamp  |            åŒdatetime            |                 åŒdatetime                 |  4å­—èŠ‚   |
|     å¹´ä»½ year     | YYYY(8.0ç‰ˆæœ¬ä¸å†æ”¯æŒyear(2)æ•°æ®) |             1901ï½2155 å’Œ 0000             |  1å­—èŠ‚   |

æ³¨ï¼šåœ¨éƒ¨åˆ†"æ•°æ®åº“æŒ‡å¯¼"æ–‡æ¡£ä¸­ï¼Œä¼šæ¨èä½¿ç”¨timestampç±»å‹ä»£æ›¿datetimeå­—æ®µï¼Œå…¶ç†ç”±æ˜¯timestampç±»å‹ä½¿ç”¨4å­—èŠ‚ï¼Œè€Œdatetimeå­—æ®µä½¿ç”¨8å­—èŠ‚ï¼Œä½†éšç€ç£ç›˜æ€§èƒ½æå‡å’Œå†…å­˜æˆæœ¬é™ä½ï¼Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½¿ç”¨timestampç±»å‹å¹¶ä¸ä¼šå¸¦æ¥å¤ªå¤šæ€§èƒ½æå‡ï¼Œåè€Œå¯èƒ½å› timestampç±»å‹çš„å®šä¹‰å’Œå–å€¼èŒƒå›´é™åˆ¶å’Œå½±å“ä¸šåŠ¡ä½¿ç”¨ã€‚

ä¾‹ï¼šç”¨æ—¶é—´æˆ³ timestampç±»å‹è®°å½•å½“å‰æ—¶é—´

```
create table login(
id int,
logintime timestamp default CURRENT_TIMESTAMP  %é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´
)engine myisam charset utf8;
```

`insert into login (id) values (1),(2),(3);`

Table loginï¼š

|  id  |      logintime      |
| :--: | :-----------------: |
|  1   | 2019-08-29 18:04:50 |
|  2   | 2019-08-29 18:04:50 |
|  3   | 2019-08-29 18:04:50 |

æ—¶é—´æˆ³åˆ—å¯ä»¥æœ‰å››ç§ç»„åˆå®šä¹‰ï¼Œå…¶å«ä¹‰åˆ†åˆ«ä¸ºï¼š

  1ã€å½“å­—æ®µå®šä¹‰ä¸ºtimestampï¼Œè¡¨ç¤ºè¯¥å­—æ®µåœ¨æ’å…¥å’Œæ›´æ–°æ—¶éƒ½ä¸ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚

  2ã€å½“å­—æ®µå®šä¹‰ä¸ºtimestamp DEFAULT CURRENT_TIMESTAMPï¼Œè¡¨ç¤ºè¯¥å­—æ®µä»…åœ¨æ’å…¥ä¸”æœªæŒ‡å®šå€¼æ—¶è¢«èµ‹äºˆå½“å‰æ—¶é—´ï¼Œå†æ›´æ–°æ—¶ä¸”æœªæŒ‡å®šå€¼æ—¶ä¸åšä¿®æ”¹ã€‚

  3ã€å½“å­—æ®µå®šä¹‰ä¸ºtimestamp ON UPDATE CURRENT_TIMESTAMPï¼Œè¡¨ç¤ºè¯¥å­—æ®µåœ¨æ’å…¥ä¸”æœªæŒ‡å®šå€¼æ—¶è¢«èµ‹å€¼ä¸º"0000-00-00 00:00:00",åœ¨æ›´æ–°ä¸”æœªæŒ‡å®šå€¼æ—¶æ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚

  4ã€å½“å­—æ®µå®šä¹‰ä¸ºtimestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMPï¼Œè¡¨ç¤ºè¯¥å­—æ®µåœ¨æ’å…¥æˆ–æ›´æ–°æ—¶æœªæŒ‡å®šå€¼ï¼Œåˆ™è¢«èµ‹å€¼ä¸ºå½“å‰æ—¶é—´ã€‚

### ä¸‰å¤§åˆ—ç±»å‹ç»ƒä¹ ï¼šæŸç¤¾äº¤ç½‘ç«™ä¼šå‘˜ä¿¡æ¯

| åˆ—åç§°    | åˆ—ç±»å‹                        | é»˜è®¤å€¼ | æ˜¯å¦ä¸»é”® |
| --------- | ----------------------------- | ------ | -------- |
| Id        | int unsigned                  |        | PRI      |
| Username  | varchar(20) ---> char(20)     | ''     |          |
| Gender    | char(1)ï¼ŒTinyint              |        |          |
| Weight    | tinyint unsigned              |        |          |
| Birth     | date                          |        |          |
| Salary    | decimal(8,2)                  |        |          |
| Lastlogin | int unsigned                  |        |          |
| Intro     | varchar(1000) ---> char(1000) |        |          |

ä¼˜åŒ–1ï¼šè¿™å¼ è¡¨é™¤äº†username/introåˆ—ä¹‹å¤–ï¼Œæ¯ä¸€åˆ—éƒ½æ˜¯å®šé•¿çš„ã€‚æˆ‘ä»¬ä¸å¦¨è®©å…¶æ‰€æœ‰åˆ—ï¼Œéƒ½å®šé•¿ï¼Œä½†æ˜¯å¯ä»¥æå¤§æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚

ä¼˜åŒ–2ï¼šusername char(20)æ˜¯ä¼šé€ æˆç©ºé—´çš„æµªè´¹ï¼Œä½†æ˜¯æé«˜çš„é€Ÿåº¦ï¼Œå€¼ï¼

Intro char(1500) å´æµªè´¹çš„å¤ªå¤šäº†ï¼Œå¦ä¸€æ–¹é¢ï¼Œäººçš„ç®€ä»‹ï¼Œä¸€æ—¦æ³¨å†Œå®Œï¼Œæ”¹çš„é¢‘ç‡ä¹Ÿå¹¶ä¸é«˜ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ introåˆ—å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå¦æ”¾ä¸€å¼ è¡¨é‡Œã€‚

åœ¨å¼€å‘ä¸­ï¼Œä¼šå‘˜çš„ä¿¡æ¯ä¼˜åŒ–å¾€å¾€æ˜¯æŠŠé¢‘ç¹ç”¨åˆ°çš„ä¿¡æ¯ä¼˜å…ˆè€ƒè™‘æ•ˆç‡ï¼Œå­˜å‚¨åˆ°ä¸€å¼ è¡¨ä¸­ï¼Œ

ä¸å¸¸ç”¨çš„ä¿¡æ¯å’Œæ¯”è¾ƒå æ®ç©ºé—´çš„ä¿¡æ¯ï¼Œä¼˜å…ˆè€ƒè™‘ç©ºé—´å ç”¨ï¼Œå­˜å‚¨åˆ°è¾…è¡¨ä¸­ã€‚å»ºè¡¨è¯­æ³•

æ‰€è°“å»ºè¡¨å°±æ˜¯ä¸€ä¸ªå£°æ˜åˆ—çš„è¿‡ç¨‹ã€‚

| åˆ—åç§°   | åˆ—ç±»å‹        | é»˜è®¤å€¼ | æ˜¯å¦ä¸»é”® |
| -------- | ------------- | ------ | -------- |
| Id       | int unsigned  |        | PRI      |
| Username | char(20)      | ''     |          |
| Intro    | varchar(1000) |        |          |



## å¢åˆ æ”¹æŸ¥ï¼ˆè¡¨æ•°æ®ï¼‰

##### å¢[insert]åˆ [delete]æ”¹[update]æŸ¥[select]

---

1. **å¢åŠ **è¡¨æ•°æ®ï¼š`insert`

   ```
   ä¾‹1ï¼šæ’å…¥1è¡Œæ‰€æœ‰åˆ—
   
   insert into class
   (Id, Sname, Gender, Company, Salary, Fanbu)
   values
   (1, 'å¼ ä¸‰', 'ç”·', 'ç™¾åº¦', 8888.67, 234);
   ```

   ```
   ä¾‹2ï¼šæ’å…¥1è¡Œéƒ¨åˆ†åˆ—Id
   
   insert into class
   (Sname, Gender, Salary)
   Values
   ('æå››','ç”·',8750.43)
   
   âš ï¸ ç”±äºidæ˜¯è‡ªå¢å‹ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨å¡«å……ï¼›Fanbué»˜è®¤å¡«å……0ï¼Œå› ä¸ºdefault 0
   ```

   ```
   ä¾‹3ï¼šæ’å…¥1è¡Œï¼Œä¸å£°æ˜æ’å…¥çš„åˆ—ï¼Œç†è§£ä¸ºä¾æ¬¡æ’å…¥æ‰€æœ‰åˆ—
   
   insert into class
   values
   (3,'ç‹äº”','å¥³','æ–°æµª',5678.99,125);	
   
   âš ï¸ æ­¤æ—¶ï¼Œè™½ç„¶Idæ˜¯è‡ªå¢å‹çš„ï¼Œä½†æ˜¯ä»éœ€å¡«å†™idï¼ˆåˆ—ä¸å€¼å¿…é¡»æŒ‰é¡ºåºä¸€ä¸€å¯¹åº”ï¼‰
   ```

   ```
   ä¾‹4ï¼šæ’å…¥å¤šè¡Œ
   
   insert into class
   values
   (4,'tom','ç”·','è…¾è®¯',9999.99,500),
   (5,'jerry','ç”·','åä¸º',9998.33,600);
   ```

2. **ä¿®æ”¹**è¡¨æ•°æ®ï¼š`update `

   ```
   update class
   set
   Gender = 'å¥³',
   Company = 'åƒåº¦'
   where id = 1;
   
   âš ï¸ where=1æˆ–è€…ä¸åŠ whereè¯­å¥ï¼Œä¼šä¿®æ”¹æ‰€æœ‰è¡Œ,ä¹Ÿå¯ä»¥æ¥æ¡ä»¶è¡¨è¾¾å¼
   ```

3. **åˆ é™¤**è¡¨æ•°æ®ï¼š`delete`

   ```
   delete from class where Salary > 8000;
   
   âš ï¸ åˆ é™¤åªèƒ½åˆ é™¤ä¸€æ•´è¡Œï¼Œä¸èƒ½åˆ é™¤ä¸€è¡Œé‡Œçš„æŸå‡ åˆ—
   ```

4. **æŸ¥çœ‹**è¡¨æ•°æ®ï¼š`select`

   ```
   ä¾‹1ï¼šï¼ˆä¸€èˆ¬ï¼‰select åˆ—åï¼ˆæˆ–*ï¼‰ from class where id = 3;
   ```

   ```
   ä¾‹2ï¼šï¼ˆå¹¿ä¹‰æŠ•å½±ï¼‰å°†åˆ—ä½œä¸ºå˜é‡è¿ç®—ï¼Œè¿ç®—ç»“æœè¿˜èƒ½èµ·ä¸ªåˆ«å
   
   select goods_id, (market_price - shop_price) as discount from goods where goods_id < 3;
   ```



## select 5ç§å­å¥

##### 5ç§å­å¥å†™çš„æ—¶å€™è¦æœ‰ä¸¥æ ¼çš„é¡ºåºï¼šwhere | group by | having | order by | limit

---

1. **where æ¡ä»¶æŸ¥è¯¢**

   åˆ—å°±æ˜¯***å˜é‡***ï¼Œåœ¨æ¯ä¸€è¡Œä¸Šï¼Œåˆ—çš„å€¼éƒ½åœ¨å˜åŒ–ã€‚Whereæ¡ä»¶æ˜¯è¡¨è¾¾å¼ï¼Œåœ¨å“ªä¸€è¡Œä¸Šè¡¨è¾¾å¼ä¸ºçœŸï¼Œå“ªä¸€è¡Œå°±å–å‡ºæ¥ã€‚whereå­å¥é’ˆå¯¹çš„å¯¹è±¡æ˜¯ç£ç›˜ä¸Šçš„***æ•°æ®è¡¨***æ–‡ä»¶å»selectçš„ï¼Œè€Œselectå‡ºæ¥åçš„æ•°æ®æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ª***ä¸´æ—¶***"ç»“æœé›†"ã€‚

   ```
   ä¾‹1ï¼šğŸ†™ã€æ¨¡ç³ŠæŸ¥è¯¢ likeã€‘â€”â€”â€œ%â€ï¼šé€šé…ä»»æ„å­—ç¬¦ï¼›â€œ_â€ï¼šé€šé…å•ä¸€å­—ç¬¦
   
   select * from goods where goods_name like 'è¯ºåŸºäºš%';
   ```

   ```
   ä¾‹2ï¼šæŸ¥æ‰¾goodsè¡¨ä¸­æœ¬åº—æ¯”å¸‚åœºä»·æ ¼çœ200ä»¥ä¸Šçš„å•†å“ï¼Œå·®ä»·å‘½åä¸ºdiscount
   
   ğŸ™† select goods_id, goods_name, (market_price - shop_price) as discount from goods where (market_price - shop_price) > 200;` 
   
   ğŸ™… select goods_id, goods_name, (market_price - shop_price) as discount from goods where discount > 200;
   
   âš ï¸ whereæ˜¯å¯¹è¡¨ä¸­çš„æ•°æ®å‘æŒ¥ä½œç”¨ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰äº§ç”Ÿdiscountã€‚
   ```

   ```
   ä¾‹3ï¼šã€floor(X)å‡½æ•°ï¼šä¸å¤§äºXçš„æœ€å¤§æ•´æ•°å€¼ã€‘æœ‰ä¸€å¼ è¡¨mianå’Œæ•°ç»„(è‡ªå»º)ï¼ŒæŠŠnumå€¼å¤„äº[20,29]ä¹‹é—´çš„æ”¹ä¸º20ï¼Œnumå€¼å¤„äº[30,39]ä¹‹é—´çš„æ”¹ä¸º30ã€‚
   
   update mian set num = floor(num/10)*10 where num >= 20 and num <= 39;
   ```

   ```
   ä¾‹4ï¼šã€substring(str,n)ï¼šå­å­—ç¬¦ä¸²ã€‘æŸ¥æ‰¾è¯ºåŸºäºšæ‰‹æœºï¼Œå¹¶å»å‰ç¼€â€™è¯ºåŸºäºšâ€˜
   
   select goods_id, goods_name, substring(goods_name,4) from goods where goods_name like 'è¯ºåŸºäºš%';
   ```

   ```
   ä¾‹5ï¼šã€concatï¼šç»“åˆä¸¤å­—ç¬¦ä¸²ã€‘ æŸ¥æ‰¾è¯ºåŸºäºšæ‰‹æœºï¼Œå¹¶æŠŠâ€™è¯ºåŸºäºšâ€˜å‰ç¼€æ¢æˆâ€˜HTCâ€˜
   
   select goods_id, goods_name, concat('HTC', substring(goods_name,4)) from goods where goods_name like 'è¯ºåŸºäºš%';
   
   update goods set goods_name = concat('HTC', substring(goods_name,4)) where goods_name like 'è¯ºåŸºäºš%';
   ```

   ---

2. **group åˆ†ç»„æŸ¥è¯¢ä¸ç»Ÿè®¡å‡½æ•°**

   ```
   ä¾‹6ï¼šã€maxï¼Œminï¼Œsumï¼Œavgã€‘
   select max(goods_number) from goods;
   ```

   ```
   ä¾‹7ï¼šã€countã€‘
   ç»Ÿè®¡goodsè¡¨ä¸­æ€»å•†å“æ•°(ç»å¯¹è¡Œæ•°)ï¼šselect count(*)(æˆ–count(1)) from goods;
   ç»Ÿè®¡goods_nameénullçš„å•†å“æ•°ï¼šselect count(goods_name) from goods;
   
   âš ï¸ count(*)å’Œcount(1)ï¼šå¯¹äºmyisamå¼•æ“çš„è¡¨ï¼Œæ²¡æœ‰åŒºåˆ«çš„ã€‚è¿™ç§å¼•æ“å†…éƒ¨æœ‰ä¸€è®¡æ•°å™¨åœ¨ç»´æŠ¤ç€è¡Œæ•°ã€‚Innodbçš„è¡¨ï¼Œç”¨count(*)ç›´æ¥è¯»è¡Œæ•°ï¼Œæ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºinnodbçœŸçš„è¦å»æ•°ä¸€éã€‚
   ```

   ```
   ä¾‹8ï¼šã€group é…åˆç»Ÿè®¡å‡½æ•°ã€‘è®¡ç®—goodsè¡¨ä¸­æ¯ä¸ªæ ç›®ä¸‹çš„åº“å­˜é‡ä¹‹å’Œï¼š
   select cat_id, sum(goods_number) from goods group by cat_id;
   
   âš ï¸ group by a, b ,c ä¸ºä¾‹ï¼Œåˆ™selectçš„åˆ—åªèƒ½åœ¨a, b, c é‡Œé€‰æ‹©è¯­ä¹‰ä¸Šæ‰æ²¡æœ‰çŸ›ç›¾ã€‚
   ```

   ---

3. **having ç­›é€‰æŸ¥è¯¢**

   havingé’ˆå¯¹çš„å¯¹è±¡æ˜¯å†…å­˜è¡¨ç»“æ„ä¸­çš„***"ç»“æœé›†"***ã€‚å¦‚æœåŒæ—¶å†™äº†whereå’Œhavingå­å¥ï¼Œwhereå­å¥è‚¯å®šè¦å†™åœ¨havingå­å¥å‰é¢ï¼Œå› ä¸ºhavingå­å¥æ˜¯é’ˆå¯¹whereå­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†æ¥æ“ä½œçš„ã€‚

   ```
   ä¾‹9ï¼šæŸ¥è¯¢æœ¬åº—ä»·æ¯”å¸‚åœºä»·çœçš„é’±ï¼Œä¸”ç­›é€‰å‡ºçœé’±200ä»¥ä¸Šçš„å•†å“ï¼ˆä¾‹2çš„havingè§£æ³•ï¼‰
   select goods_id, goods_name,(market_price-shop_price) as save from goods having save > 200;
   ```

   ```
   ä¾‹10ï¼šæŸ¥è¯¢æ¯ä¸ªæ ç›®ç§¯å‹çš„è´§æ¬¾ï¼Œä¸”ç­›é€‰å‡ºç§¯å‹è´§æ¬¾å¤§äº20000çš„æ ç›®
   select cat_id, (goods_number * shop_price) as remain from goods group by cat_id having remain > 20000;
   ```

   ```Â 
   ğŸŒŸä¾‹11ï¼šæŸ¥è¯¢æŒ‚ç§‘æ•°å¤§äº2é—¨çš„å­¦ç”Ÿçš„å¹³å‡æˆç»©
   è§£æ³•ä¸€ï¼š
   ğŸ™† select name,sum(score<60) as fail,avg(score) from result group by name having fail>=2;
   ğŸ™… select name,count(score<60) as fail,avg(score) from result group by name having fail>=2;
   âš ï¸ æ— è®ºæ˜¯count(1)è¿˜æ˜¯count(0)éƒ½ä¼šè¢«ç»Ÿè®¡
   
   è§£æ³•äºŒã€å­æŸ¥è¯¢ã€‘ï¼š
   æ€è·¯ï¼šStep1. æ‰¾å‡ºæŒ‚ç§‘æ•°>=2çš„äººåŠå…¶æŒ‚ç§‘æ•°ï¼›Step2. è®¡ç®—ä»–ä»¬çš„å¹³å‡åˆ†
   ğŸ™† select name, avg(score) from result where name in (select name from (select name, count(1) as gks from result where score<60 group by name having gks>=2) as tmp) group by name;
   ```

   ---

4. **order by æ’åºæŸ¥è¯¢**

   å¯¹ç»“æœé›†è¿›è¡Œæ’åº 

   `...order by åˆ—1 asc/desc åˆ—2 asc/desc åˆ—3 asc/desc...	%ä¸å†™é»˜è®¤asc`

   ```
   ä¾‹12ï¼šæŒ‰ä»·æ ¼ç”±é«˜åˆ°ä½æ’åº
   select goods_id,goods_name,shop_price from goods order by shop_price desc;
   ```

   ```
   ä¾‹13ï¼šå…ˆæŒ‰æ ç›®ç”±ä½åˆ°é«˜æ’åº,æ ç›®å†…éƒ¨å†æŒ‰ä»·æ ¼ç”±é«˜åˆ°ä½æ’åºã€æœ‰å†²çªæ—¶ï¼Œé¡ºåºå†³å®šä¼˜å…ˆã€‘
   select goods_id,cat_id,goods_name,shop_price from goods order by cat_id asc,shop_price desc;
   ```

   ---

5. **limit é™åˆ¶æ¡ç›®**

   `...limit [offset] N	%offsetï¼šåç§»é‡ï¼›Nï¼šå–å‡ºæ¡ç›®	`

   ```
   ä¾‹14ï¼šæŸ¥è¯¢æœ¬åº—ä»·æ ¼æœ€é«˜çš„å‰3å
   select goods_id,goods_name,shop_price from goods order by shop_price desc limit 3;
   ```

   ```
   ä¾‹15ï¼šå–å‡ºç‚¹å‡»é‡ç¬¬3ååˆ°å‰5åçš„å•†å“
   select goods_id,goods_name,click_count from goods order by click_count desc limit 2,3;
   ```

---

å‚è€ƒæ–‡ç« ï¼š[æœ€å…¨çš„MySQLåŸºç¡€](https://www.cnblogs.com/lms520/p/5427685.html)ã€[ç‡•åå…«MySQL-ç§˜ç±](https://blog.csdn.net/qixibalei/article/details/54340872)ã€[ç‡•åå…«mysqlå¤ä¹ ](https://blog.csdn.net/z10160/article/details/10610637)